<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Home on AJ Friend</title><link>https://ajfriend.com/</link><description>Recent content in Home on AJ Friend</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 09 Jan 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://ajfriend.com/index.xml" rel="self" type="application/rss+xml"/><item><title>[WIP] Making H3's cells-to-polygon faster</title><link>https://ajfriend.com/blog/cells_to_poly/</link><pubDate>Fri, 09 Jan 2026 00:00:00 +0000</pubDate><guid>https://ajfriend.com/blog/cells_to_poly/</guid><description>&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: This post is currently a quick-and-dirty attempt at explaining the algorithm
behind &lt;a href="https://github.com/uber/h3/pull/1113"&gt;cellsToMultiPolygon core algorithm #1113 · uber/h3&lt;/a&gt;. My plan is to grow this into a
proper blog post with more context, background, etc.&lt;/p&gt;
&lt;h1 id="goal-h3-cells-to-spherical-polygons"&gt;Goal: H3 cells to spherical polygons&lt;/h1&gt;
&lt;p&gt;A collection of &lt;a href="https://h3geo.org/"&gt;H3 cells&lt;/a&gt; describes a subset of the globe,
and a common operation is to translate that set of cells into spherical polygons
(e.g., a &lt;a href="https://geojson.org/"&gt;GeoJSON&lt;/a&gt; &lt;code&gt;MultiPolygon&lt;/code&gt;) outlining the same region.&lt;/p&gt;</description></item><item><title>[WIP] Computing Spherical Polygon Areas</title><link>https://ajfriend.com/blog/sphere_poly_area/</link><pubDate>Sat, 03 Jan 2026 00:00:00 +0000</pubDate><guid>https://ajfriend.com/blog/sphere_poly_area/</guid><description>&lt;script src="https://cdn.jsdelivr.net/npm/d3@7"&gt;&lt;/script&gt;
&lt;p&gt;The &lt;a href="https://github.com/uber/h3/"&gt;H3&lt;/a&gt; library provides a hexagonal
geospatial grid system, and being a geospatial library, one of the things
we want to be able to do is to compute the surface areas of polygons on
the sphere. This post will go through the math behind the spherical polygon area
calculation that we use, which I mostly learned about through the &lt;a href="https://github.com/d3/d3-geo/blob/main/src/area.js"&gt;D3 library&amp;rsquo;s area calculation code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This algorithm is robust enough to handle many tricky polygons, including ones
that may be larger than a hemisphere, contain the north or south pole, or cross
the antimeridian. Drag around the plot below to see an example:&lt;/p&gt;</description></item><item><title>[WIP] Elements of Spherical Polygons</title><link>https://ajfriend.com/blog/sphere_poly/</link><pubDate>Fri, 02 Jan 2026 00:00:00 +0000</pubDate><guid>https://ajfriend.com/blog/sphere_poly/</guid><description>&lt;p&gt;These are some of my notes on constructing spherical polygons, related to
my work on the H3 cells-to-polygon functionality.&lt;/p&gt;
&lt;p&gt;When working with spherical polygons, &amp;ldquo;edge cases&amp;rdquo; often cause problems: larger-than-a-hemisphere polygons, edges that cross the antimeridian, polygons containing
the north or south pole, or issues with loop orientation.
Luckly, all these issues can be handled easily if you format and interpret polygons
in the right way.&lt;/p&gt;
&lt;p&gt;This is my take on &amp;ldquo;the right way&amp;rdquo;. Note that these ideas are not new, and if other
systems do something different, it is probably because they are constrained by supporting historical formats. (TODO: maybe discuss some differences in an appendix.
2d-native, non-geodesic lines)&lt;/p&gt;</description></item><item><title>Notes on justfiles</title><link>https://ajfriend.com/blog/using_just/</link><pubDate>Thu, 01 Jan 2026 00:00:00 +0000</pubDate><guid>https://ajfriend.com/blog/using_just/</guid><description>&lt;p&gt;Some notes&amp;mdash;mostly for myself&amp;mdash;around how I use &lt;a href="https://github.com/casey/just"&gt;&lt;code&gt;just&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h1 id="clean-recipe"&gt;Clean recipe&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-justfile" data-lang="justfile"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#06287e"&gt;clean&lt;/span&gt;&lt;span style="color:#666"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; just _rm env
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; just _rm .venv
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; just _rm &lt;span style="color:#4070a0"&gt;&amp;#39;*.pytest_cache&amp;#39;&lt;/span&gt; &lt;span style="color:#60a0b0;font-style:italic"&gt;# put wildcards in quotes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; just _rm .DS_Store
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#06287e"&gt;_rm pattern&lt;/span&gt;&lt;span style="color:#666"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -@find . -name &lt;span style="color:#4070a0"&gt;&amp;#34;{{pattern}}&amp;#34;&lt;/span&gt; -prune -exec rm -rf &lt;span style="color:#666"&gt;{}&lt;/span&gt; +
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Alternatively, there&amp;rsquo;s &lt;code&gt;git clean -fdx&lt;/code&gt;, but I don&amp;rsquo;t use that often.&lt;/p&gt;
&lt;h1 id="uv"&gt;UV&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://docs.astral.sh/uv/"&gt;&lt;code&gt;uv&lt;/code&gt;&lt;/a&gt; is great, but I really wish it had an &amp;ldquo;online, but best effort when offline&amp;rdquo;
for retrieving packages, so that I can work seamlessly when my laptop
doesn&amp;rsquo;t have an internet connection.&lt;/p&gt;</description></item><item><title>Big Figures</title><link>https://ajfriend.com/notes/big_figs/</link><pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate><guid>https://ajfriend.com/notes/big_figs/</guid><description>&lt;p&gt;Can i plot some big figs?&lt;/p&gt;
&lt;a href="figs/83754efffffffff.png" target="_blank" rel="noopener noreferrer"&gt;
 &lt;img src="figs/83754efffffffff.png" alt="Bin plot" style="cursor: zoom-in;" loading="lazy"&gt;
&lt;/a&gt;

&lt;h1 id="globes"&gt;Globes&lt;/h1&gt;
&lt;p&gt;&lt;img src="figs/globe0.png" alt="Globe 0"&gt;
&lt;img src="figs/globe1.png" alt="Globe 1"&gt;
&lt;img src="figs/globe2.png" alt="Globe 2"&gt;&lt;/p&gt;</description></item><item><title>Reproducible Plots Example</title><link>https://ajfriend.com/notes/reproducible_plots/</link><pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate><guid>https://ajfriend.com/notes/reproducible_plots/</guid><description>&lt;p&gt;This post demonstrates keeping Python code and generated figures together with the post content.&lt;/p&gt;
&lt;h2 id="sine-and-cosine-waves"&gt;Sine and Cosine Waves&lt;/h2&gt;
&lt;p&gt;Here&amp;rsquo;s a simple plot of sine and cosine functions generated with matplotlib:&lt;/p&gt;
&lt;p&gt;&lt;img src="images/trig_functions.png" alt="Sine and Cosine"&gt;&lt;/p&gt;
&lt;h2 id="random-walk"&gt;Random Walk&lt;/h2&gt;
&lt;p&gt;A visualization of a 2D random walk with 1000 steps:&lt;/p&gt;
&lt;p&gt;&lt;img src="images/random_walk.png" alt="Random Walk"&gt;&lt;/p&gt;
&lt;h2 id="regenerating-the-figures"&gt;Regenerating the Figures&lt;/h2&gt;
&lt;p&gt;All figures in this post are generated from Python code in the &lt;code&gt;code/&lt;/code&gt; directory. The project uses &lt;a href="https://docs.astral.sh/uv/"&gt;uv&lt;/a&gt; to manage dependencies, ensuring reproducibility across different environments and Python versions.&lt;/p&gt;</description></item><item><title>Software</title><link>https://ajfriend.com/software/</link><pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate><guid>https://ajfriend.com/software/</guid><description>&lt;p&gt;&lt;strong&gt;Software&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="https://github.com/uber/h3-py"&gt;h3-py&lt;/a&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Author and maintainer&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="https://github.com/uber/h3"&gt;H3&lt;/a&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Steering Committee Member and co-maintainer&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="https://github.com/ajfriend/duckboat"&gt;duckboat&lt;/a&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Author and maintainer (and probably only user)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="https://github.com/cvxpy/cvxpy"&gt;CVXPY&lt;/a&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Contributor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Spherical Aspect Ratio</title><link>https://ajfriend.com/notes/sphere_aspect_ratio/</link><pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate><guid>https://ajfriend.com/notes/sphere_aspect_ratio/</guid><description>&lt;p&gt;We can compute the spherical aspect ratio&lt;/p&gt;
&lt;p&gt;TODO: worry about the 
 &lt;span class="katex"&gt;&lt;span class="katex-html" aria-hidden="true"&gt;&lt;span class="base"&gt;&lt;span class="strut" style="height:0.888em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord mathnormal"&gt;A&lt;/span&gt;&lt;span class="msupsub"&gt;&lt;span class="vlist-t"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.888em;"&gt;&lt;span style="top:-3.063em;margin-right:0.05em;"&gt;&lt;span class="pstrut" style="height:2.7em;"&gt;&lt;/span&gt;&lt;span class="sizing reset-size6 size3 mtight"&gt;&lt;span class="mord mtight"&gt;&lt;span class="mord mtight"&gt;1/2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

 &lt;span class="katex-display"&gt;&lt;span class="katex"&gt;&lt;span class="katex-html" aria-hidden="true"&gt;&lt;span class="base"&gt;&lt;span class="strut" style="height:4.5591em;vertical-align:-2.0296em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mtable"&gt;&lt;span class="col-align-r"&gt;&lt;span class="vlist-t vlist-t2"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:2.5296em;"&gt;&lt;span style="top:-4.6896em;"&gt;&lt;span class="pstrut" style="height:3em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord text"&gt;&lt;span class="mord"&gt;maximize&lt;/span&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:1em;"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="top:-3.1304em;"&gt;&lt;span class="pstrut" style="height:3em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord text"&gt;&lt;span class="mord"&gt;subject to&lt;/span&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:1em;"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="top:-1.6304em;"&gt;&lt;span class="pstrut" style="height:3em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-s"&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:2.0296em;"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="col-align-l"&gt;&lt;span class="vlist-t vlist-t2"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:2.5296em;"&gt;&lt;span style="top:-4.6896em;"&gt;&lt;span class="pstrut" style="height:3em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord"&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="mop"&gt;lo&lt;span style="margin-right:0.01389em;"&gt;g&lt;/span&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="mop"&gt;det&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="mord mathnormal"&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="top:-3.1304em;"&gt;&lt;span class="pstrut" style="height:3em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord"&gt;&lt;/span&gt;&lt;span class="mord"&gt;∥&lt;/span&gt;&lt;span class="mord mathnormal"&gt;A&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord mathnormal"&gt;x&lt;/span&gt;&lt;span class="msupsub"&gt;&lt;span class="vlist-t vlist-t2"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.3117em;"&gt;&lt;span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"&gt;&lt;span class="pstrut" style="height:2.7em;"&gt;&lt;/span&gt;&lt;span class="sizing reset-size6 size3 mtight"&gt;&lt;span class="mord mathnormal mtight"&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-s"&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.15em;"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord"&gt;∥&lt;/span&gt;&lt;span class="msupsub"&gt;&lt;span class="vlist-t vlist-t2"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.3011em;"&gt;&lt;span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"&gt;&lt;span class="pstrut" style="height:2.7em;"&gt;&lt;/span&gt;&lt;span class="sizing reset-size6 size3 mtight"&gt;&lt;span class="mord mtight"&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-s"&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.15em;"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.2778em;"&gt;&lt;/span&gt;&lt;span class="mrel"&gt;≤&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.2778em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord mathnormal"&gt;b&lt;/span&gt;&lt;span class="msupsub"&gt;&lt;span class="vlist-t"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.8991em;"&gt;&lt;span style="top:-3.113em;margin-right:0.05em;"&gt;&lt;span class="pstrut" style="height:2.7em;"&gt;&lt;/span&gt;&lt;span class="sizing reset-size6 size3 mtight"&gt;&lt;span class="mord mtight"&gt;⊤&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord mathnormal"&gt;x&lt;/span&gt;&lt;span class="msupsub"&gt;&lt;span class="vlist-t vlist-t2"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.3117em;"&gt;&lt;span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"&gt;&lt;span class="pstrut" style="height:2.7em;"&gt;&lt;/span&gt;&lt;span class="sizing reset-size6 size3 mtight"&gt;&lt;span class="mord mathnormal mtight"&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-s"&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.15em;"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="mpunct"&gt;,&lt;/span&gt;&lt;span class="mspace" style="margin-right:1em;"&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;∀&lt;/span&gt;&lt;span class="mspace"&gt; &lt;/span&gt;&lt;span class="mord mathnormal"&gt;i&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.2778em;"&gt;&lt;/span&gt;&lt;span class="mrel"&gt;=&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.2778em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;1&lt;/span&gt;&lt;span class="mpunct"&gt;,&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="minner"&gt;…&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="mpunct"&gt;,&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.1667em;"&gt;&lt;/span&gt;&lt;span class="mord mathnormal"&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="top:-1.6304em;"&gt;&lt;span class="pstrut" style="height:3em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord"&gt;&lt;/span&gt;&lt;span class="mord"&gt;∥&lt;/span&gt;&lt;span class="mord mathnormal"&gt;b&lt;/span&gt;&lt;span class="mord"&gt;&lt;span class="mord"&gt;∥&lt;/span&gt;&lt;span class="msupsub"&gt;&lt;span class="vlist-t vlist-t2"&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.3011em;"&gt;&lt;span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"&gt;&lt;span class="pstrut" style="height:2.7em;"&gt;&lt;/span&gt;&lt;span class="sizing reset-size6 size3 mtight"&gt;&lt;span class="mord mtight"&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-s"&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:0.15em;"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.2778em;"&gt;&lt;/span&gt;&lt;span class="mrel"&gt;≤&lt;/span&gt;&lt;span class="mspace" style="margin-right:0.2778em;"&gt;&lt;/span&gt;&lt;span class="mord"&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-s"&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class="vlist-r"&gt;&lt;span class="vlist" style="height:2.0296em;"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;</description></item></channel></rss>